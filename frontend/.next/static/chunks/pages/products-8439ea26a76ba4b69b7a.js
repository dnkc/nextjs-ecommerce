(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{8334:function(n,i,r){"use strict";r.d(i,{$:function(){return T},Z:function(){return C}});var e=r(5893),t=r(7261),d=r(7450),o=r(3633),a=r(9163),s=a.ZP.div.withConfig({displayName:"ItemStyles",componentId:"sc-16pk14u-0"})(["background:white;border:1px solid var(--offWhite);box-shadow:var(--bs);position:relative;display:flex;flex-direction:column;img{width:100%;height:400px;object-fit:cover;}p{line-height:2;font-weight:300;flex-grow:1;padding:0 3rem;font-size:1.5rem;}.buttonList{display:grid;width:100%;border-top:1px solid var(--lightGray);grid-template-columns:repeat(auto-fit,minmax(100px,1fr));grid-gap:1px;background:var(--lightGray);& > *{background:white;border:0;font-size:1rem;padding:1rem;}}"]),u=a.ZP.h3.withConfig({displayName:"Title",componentId:"sc-16nq74k-0"})(["margin:0 1rem;text-align:center;transform:skew(-5deg) rotate(-1deg);margin-top:-3rem;text-shadow:2px 2px 0 rgba(0,0,0,0.1);a{background:var(--red);display:inline;line-height:1.3;font-size:4rem;text-align:center;color:white;padding:0 1rem;}"]),c=a.ZP.span.withConfig({displayName:"PriceTag",componentId:"sc-nwbk6t-0"})(["background:var(--red);transform:rotate(3deg);color:white;font-weight:600;padding:5px;line-height:1;font-size:3rem;display:inline-block;position:absolute;top:-3px;right:-3px;"]),l=r(1664),p=r(4849),f=r(9227),g=r(5709);function h(){var n=(0,t.Z)(["\n  mutation DELETE_PRODUCT_MUTATION($id: ID!) {\n    deleteProduct(id: $id) {\n      id\n      name\n    }\n  }\n"]);return h=function(){return n},n}var m=(0,d.ZP)(h());function x(n,i){n.evict(n.identify(i.data.deleteProduct))}function v(n){var i=n.id,r=n.children,t=(0,g.D)(m,{variables:{id:i},update:x}),d=(0,f.Z)(t,2),o=d[0],a=d[1],s=a.loading;a.error;return(0,e.jsx)("button",{type:"button",disabled:s,onClick:function(){confirm("Are you sure you want to delete this item?")&&o().catch((function(n){return alert(n.message)}))},children:r})}r(2773);var b=r(4653);function j(){var n=(0,t.Z)(["\n  mutation ADD_TO_CART_MUTATION($id: ID!) {\n    addToCart(productId: $id) {\n      id\n    }\n  }\n"]);return j=function(){return n},n}var w=(0,d.ZP)(j());function y(n){var i=n.id,r=(0,g.D)(w,{variables:{id:i},refetchQueries:[{query:b.z}]}),t=(0,f.Z)(r,2),d=t[0],o=t[1].loading;return(0,e.jsxs)("button",{type:"button",disabled:o,onClick:function(){d()},children:["Add",o&&"ing"," To Cart"]})}var _=function(n){var i,r,t=n.product;return(0,e.jsxs)(s,{children:[(0,e.jsx)("img",{src:null===t||void 0===t||null===(i=t.photo)||void 0===i||null===(r=i.image)||void 0===r?void 0:r.publicUrlTransformed,alt:t.name}),(0,e.jsx)(u,{children:(0,e.jsx)(l.default,{href:"/product/".concat(t.id),children:t.name})}),(0,e.jsxs)(c,{children:[" ",(0,p.Z)(t.price)]}),(0,e.jsx)("p",{children:t.description}),(0,e.jsxs)("div",{className:"buttonList",children:[(0,e.jsx)(l.default,{href:{pathname:"/update",query:{id:t.id}},children:"Edit"}),(0,e.jsx)(y,{id:t.id}),(0,e.jsx)(v,{id:t.id,children:"Delete"})]})]})},k=r(4985);function P(){var n=(0,t.Z)(["\n  query ALL_PRODUCTS_QUERY($skip: Int = 0, $first: Int) {\n    allProducts(first: $first, skip: $skip) {\n      id\n      name\n      price\n      description\n      photo {\n        id\n        image {\n          publicUrlTransformed\n        }\n      }\n    }\n  }\n"]);return P=function(){return n},n}var T=(0,d.ZP)(P()),Z=a.ZP.div.withConfig({displayName:"Products__ProductsListStyles",componentId:"sc-1uv5x8m-0"})(["display:grid;grid-template-columns:1fr 1fr;grid-gap:60px;"]),C=function(n){var i=n.page,r=(0,o.a)(T,{variables:{skip:i*k.ji-k.ji,first:k.ji}}),t=r.data,d=r.error;return r.loading?(0,e.jsx)("p",{children:"Loading..."}):d?(0,e.jsxs)("p",{children:["Error: ",d.message]}):(0,e.jsx)("div",{children:(0,e.jsx)(Z,{children:t.allProducts.map((function(n){return(0,e.jsx)(_,{product:n},n.id)}))})})}},1860:function(n,i,r){"use strict";r.r(i);var e=r(5893),t=r(2441),d=(r(7294),r(4912)),o=r(8334);i.default=function(){var n=(0,t.useRouter)().query,i=parseInt(n.page);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(d.Z,{page:i||1}),(0,e.jsx)(o.Z,{page:i||1}),(0,e.jsx)(d.Z,{page:i||1})]})}},9343:function(n,i,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r(1860)}])}},function(n){n.O(0,[774,888,179],(function(){return i=9343,n(n.s=i);var i}));var i=n.O();_N_E=i}]);